machine:
  environment:
    TFBIN_DIR: $HOME/tfbin
    TERRAFORM_VERSION: 0.11.8
    AWSCREDS_CHECKSUM: 84ccfb8e13b5fce63051294f787885b76a1fedef6bdbecf51c5e586c9e20c9b7
dependencies:
  pre:
  - ./scripts/download_terraform.sh $TERRAFORM_VERSION
  - ./scripts/download_provider.sh awscreds $AWSCREDS_CHECKSUM
  override:
  - ~/tfbin/terraform init -upgrade -input=false
test:
  override:
  - ~/tfbin/terraform fmt -write=false -diff=true -check
  - ~/tfbin/terraform plan -detailed-exitcode -input=false
